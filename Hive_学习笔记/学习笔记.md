#### 1.Hive的本质
```
hive的本质是，在hive数据表与已经存在的结构化的数据文件之间建立映射关系。映射建立成功之后，
就可以通过SQL来分析这些结构化的数据文件，避免了写MR程序。
```
#### 2.Hive数据库系统与文件的对应关系
```
hive数据库       对应    /usr/hive/warehouse(HDFS)目录下的一个文件夹
    数据表       对应    所在数据库的目录下的子文件夹
表中的数据       对应    所在数据表目录下的文件
```

#### 3.Hive的建表语句
```
创建hive表时，可能还需要指定分隔符，否则数据可能会加载不成功：
   create table test(id int, name string , age int) row format delimited fields terminated by ',';
   其中，表名--test，字段--id,name,age。
   delimited关键字表示使用的是内置分隔符。
```

#### 4.复杂数据类型指定分隔符
```
HQL建表语句：
create table t_hobby(id int,name string,hobby map<string, string>) 
row format delimited fields terminated by ',' 
collection items terminated by '-' 
map keys terminated by ':';
示例数据：
   1,Tom,打游戏:非常喜欢-篮球:喜欢
   2,Lucy,唱歌:非常喜欢-跳舞:喜欢-游泳:一般
```

#### 5.建表注意事项
```
1.建表的时候一定要根据所对应的结构化数据文件的分隔符来指定建表分隔符；
2.建表的字段的个数及字段类型要与对应的结构化数据文件中的数据格式匹配。
```

#### 6.关于Hive的默认分隔符
```
1.hive建表的时候默认的分隔符是'\001'，若在建表的时候没有指定分隔符，load文件的时候文件的分隔符就被默认为是'\001';若文件分隔符
不是'\001'，程序不会报错，但表查询的结果会全部是“NULL”。
2.用vi编辑器，先Ctrl+v,然后Ctrl+a即可输入'\001'-------^A
```

#### 7.Hive读写文件的机制
```
1.Hive读取文件的机制：首先调用InputFormat(默认TextInputFormat)，返回一条一条的记录(默认是一行对应一条记录)。然后调用
  SerDe(默认是LazySimpleSerDe)的Deserializer，将一条记录切分为各个字段(默认分隔符--'\001')。
2.Hive写文件的机制：将Row写入文件时，主要调用OutputFormat、SerDe的Serializer,顺序与读取相反。
```

#### 8.Partitioned By与分区表
```
1.在Hive的select查询中一般会扫描整个表的内容，会消耗很多时间做没有必要的工作。有时候只需扫描表中关心的某一特定部分的数据，因此
  hive在建表时,通过关键字partitioned by 引入了分区(partition)的概念。
2.分区表指的是在创建表的时候指定的partition的分区空间。一个表可以拥有一个或多个分区，每个分区以文件夹的形式单独存在于所属表文件夹的
  目录下。表和列名不区分大小写。分区是以字段的形式在表结构中存在，通过describe table 命令可以查看到该字段存在，但是该字段不存放实际
  的数据内容，仅仅是分区的表示。
3.HQL建表语句示例：create table t_employee(id int,name string) partitioned by(country string) 
  row format delimited fields terminated by ',';
  对应数据文件的数据格式：
  1,Tony
  2,李明
4.注意事项：a).用于分区的字段不能是数据表中已经存在的字段；b).分区字段是一个虚拟字段，不存放任何数据；c).分区字段的值是在装载表的
  分区数据时指定的：Load DATA Local inpath '/usr/hive/a.txt' into table test partition(country='USA'); . 
5.多分区表，HQL建表语句示例：create table t_employee(id int,name string) partitioned by(day string,hour string) 
  row format delimited fields terminated by ',';
6.分区表字段在HDFS上的体现是所属数据表的文件夹目录下会依据分区字段依次建立子文件夹，建立规则是左边的分区字段所对应的文件夹目录
  是相邻的右边的分区字段所对应文件夹的父目录。
```









